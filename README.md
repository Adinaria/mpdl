# Laravel API Project - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

> Laravel API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏

## üéØ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç

- **Laravel 12** —Å PHP 8.2
- **RESTful API** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
- **Laravel Sanctum** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Spatie Permissions** —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- **Spatie Laravel data** Data transfer Objects (DTO)
- **Unit —Ç–µ—Å—Ç—ã** (Pest)
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (Scribe)
- **Docker** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ {domain}/docs**

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Docker** –∏ **Docker Compose**
- **Git**

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
git clone https://github.com/Adinaria/mpdl.git
cd mpdl
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
cd .docker
docker-compose build
docker-compose up -d
```

### 3Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Laravel

```bash
# –ó–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
docker exec -it app_test bash -c "chmod +x .docker/setup.sh && ./.docker/setup.sh"
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç:

- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫—É Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Scribe)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üõ†Ô∏è –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞)

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
git clone https://github.com/Adinaria/mpdl.git
cd mpdl
docker network create project-network
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
cd .docker
docker-compose build
docker-compose up -d
```

### 3Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Laravel

```bash
# –ó–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it app_test bash

# –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
composer install --optimize-autoloader
cp .env.example .env
php artisan key:generate
php artisan migrate
php artisan db:seed
php artisan storage:link
php artisan scribe:generate

# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chown -R www-data:www-data storage bootstrap/cache
chmod -R 775 storage bootstrap/cache

exit
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

üåê **http://localhost:8039**

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Adminer)

üóÑÔ∏è **http://localhost:6031**

- –°–µ—Ä–≤–µ—Ä: `db`
- –õ–æ–≥–∏–Ω: `test`
- –ü–∞—Ä–æ–ª—å: `test`
- –ë–∞–∑–∞: `test`

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è 

üóÑÔ∏è **http://localhost:8039/docs**

---

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it app_test bash

# Unit —Ç–µ—Å—Ç—ã
php artisan test tests/Unit/

```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—Ä—Ç 8039 –∑–∞–Ω—è—Ç

–ò–∑–º–µ–Ω–∏ –≤ `.docker/docker-compose.yml`:

```yaml
ports:
  - "8040:80"  # –≤–º–µ—Å—Ç–æ 8039:80
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it app_test chown -R www-data:www-data storage bootstrap/cache
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ Http/Controllers/API/V1/    # API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îú‚îÄ‚îÄ Http/Requests/API/V1/       # –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ Http/Resources/API/V1/      # API —Ä–µ—Å—É—Ä—Å—ã
‚îú‚îÄ‚îÄ Services/                   # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ DTOs/                       # –û–±—ä–µ–∫—Ç—ã –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

tests/
‚îî‚îÄ‚îÄ Unit/                      # Unit —Ç–µ—Å—Ç—ã

.docker/
‚îú‚îÄ‚îÄ docker-compose.yml         # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                # PHP –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ nginx/                    # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ mysql/                    # MySQL –¥–∞–Ω–Ω—ã–µ
```

---

### –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞

–ö–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –Ω–µ –Ω—É–∂–µ–Ω.

---

## üìù –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **Sanctum –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**  
‚úÖ **CRUD –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π**  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (Spatie)**  
‚úÖ **API —Ä–µ—Å—É—Ä—Å—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è**  
‚úÖ **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
‚úÖ **Unit —Ç–µ—Å—Ç—ã**  
‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**  
‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π**  
‚úÖ **Repository + Service –ø–∞—Ç—Ç–µ—Ä–Ω—ã**  
‚ùå **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

## üìù –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–∞—Ç—Ç–µ—Ä–Ω—ã Repository –∏ Service –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –≠—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞.
2) –ü—Ä–∏–º–µ–Ω–∏–ª DTO (Data Transfer Objects) –¥–ª—è —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—â–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é.
3) –í–Ω–µ–¥—Ä–∏–ª –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Ä–æ–ª–∏). –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–µ—Ä–Ω—É–ª –æ–±–µ—Ä—Ç–∫–æ–π –∏–∑ —Ç—Ä–µ–π—Ç–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–µ—à–∏—Ä—É–µ–º—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏.
–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ –ø—Ä–∏—Å—Ö–æ–¥–∏—Ç –≤ boot –º–æ–¥–µ–ª–∏, —Ç–∞–∫ –∫–∞–∫ –ø–æ –º–æ–µ–π –ª–æ–≥–∏–∫–∏ –º—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—Ö–æ–¥–∏–º —á–µ—Ä–µ–∑ boot –º–æ–¥–µ–ª–∏.
–ó–∞–ø–∏—Å—ã–≤–∞—é –¥–∞–∂–µ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–µ—à, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∞–∑–µ, –¥–∞–Ω–Ω—ã–µ –Ω–∞–ª–æ–∂–∏—Ç—å—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –Ω–µ –º–æ–≥—É—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ CRUD –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—á–∏—Å—Ç–∫–∞.
4) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª Spatie Permission –ø–∞–∫–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –≤ –Ω–µ–º —Å—Ä–∞–∑—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–æ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–æ—Å—Ç–∏–ª–∏ —Ä–∞–±–æ—Ç—É.
5) –ò–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ: –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Å–æ–≤ (singleton). –í –±–¥ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è (uuid).
–î–æ–±–∞–≤–ª–µ–Ω—ã select field –¥–ª—è –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π –≤ –ø–æ–ª—É—á–∞–µ–º—ã—Ö —Å–ø–∏—Å–∫–∞—Ö (—Ä–æ–ª–µ–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).
6) –î–æ–±–∞–≤–ª–µ–Ω–æ –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π, –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
1) –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å.
–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å prometheus + Graphana Cloud –∏ –Ω–∞–≥—Ä—É–∂–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ k6. –ü–æ–ø—ã—Ç–∫–∏ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –µ—Å—Ç—å –≤ –≤–µ—Ç–∫–µ prometheus
–¢–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏—Å—å –∫–æ–Ω—Ç–µ–π–Ω—Ä prometheus –∏ exporters –¥–ª—è nginx, php-fpm (–¥–æ mysql –Ω–µ –¥–æ—à–µ–ª).
2) –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –≤—Å–µ –∑–∞–¥–∞—á–∏ —É—à–ª–æ –ø–æ—Ä—è–¥–∫–∞ 16 —á–∞—Å–æ–≤ (–±–µ—Ä—É –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
3) –ü—Ä–æ–µ–∫—Ç –±–µ–∑ —Ñ—Ä–æ–Ω—Ç–∞

